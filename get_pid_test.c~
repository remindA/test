#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>


int main()
{
    char cmd[] = "ps | grep \"bash\"";
    FILE *fp_ps = popen(cmd, "r");
    if(NULL == fp_ps)
    {
        perror("popen");
        exit(1);
    }

    char line[256] = {0};
    if(NULL == fgets(line, sizeof(line), fp_ps))
    {
        perror("fgets");
        exit(1);
    }
    char format[] = " %s ";
    char pid_str[6] = {0};
    sscanf(line, format, pid_str);
    printf("%s\n", line);
    printf("pid_str=%s\n", pid_str);
    
    pclose(fp_ps);
    return 0;
}
